<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Power Plant Diagram with Fabric.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.5.0/fabric.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; }
        canvas { border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>Power Plant Diagram</h1>
    <canvas id="canvas" width="800" height="400"></canvas>

    <button onclick="updateStatus('Normal')">Set to Normal</button>
    <button onclick="updateStatus('Error')">Set to Error</button>

    <script>
        var canvas = new fabric.Canvas('canvas');

        // Create shapes
        var boiler = new fabric.Rect({
            left: 100,
            top: 100,
            width: 200,
            height: 100,
            fill: 'blue',
            selectable: false
        });
        canvas.add(boiler);

        var boilerText = new fabric.Text('Boiler', {
            left: 200,
            top: 160,
            fill: 'white',
            selectable: false
        });
        canvas.add(boilerText);

        var turbine = new fabric.Circle({
            left: 500,
            top: 150,
            radius: 50,
            fill: 'green',
            selectable: false
        });
        canvas.add(turbine);

        var turbineText = new fabric.Text('Turbine', {
            left: 500,
            top: 155,
            fill: 'white',
            selectable: false
        });
        canvas.add(turbineText);

        var line = new fabric.Line([boiler.left + boiler.width / 2, boiler.top + boiler.height / 2,
                                    turbine.left + turbine.radius, turbine.top + turbine.radius], {
            stroke: 'black',
            strokeWidth: 2,
            selectable: false
        });
        canvas.add(line);

        var boilerNumber = new fabric.Text('0', {
            left: 200,
            top: 210,
            fill: 'black',
            selectable: false
        });
        canvas.add(boilerNumber);

        var turbineNumber = new fabric.Text('0', {
            left: 500,
            top: 210,
            fill: 'black',
            selectable: false
        });
        canvas.add(turbineNumber);

        function updateStatus(status) {
            if (status === 'Normal') {
                boiler.set('fill', 'blue');
                turbine.set('fill', 'green');
                boilerNumber.set('text', '10');
                turbineNumber.set('text', '20');
            } else {
                boiler.set('fill', 'red');
                turbine.set('fill', 'red');
                boilerNumber.set('text', '5');
                turbineNumber.set('text', '10');
            }
            canvas.renderAll();
        }
    </script>
</body>
</html>
